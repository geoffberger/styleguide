<script>
  (function () {
    // rc namespace
    window.rc = {

      // queue to hold all the functions and execute later
      'q': [],

      // execute options set by url parameters
      applyParams: function (pageOptions) {
        var docLocSearch = document.location.search;
        var params = docLocSearch ? docLocSearch.substr(1).split('&') : [];
        var pair, key, value, fn;

        params.forEach(function (param) {
          pair = param.split('=');
          key = pair[0];
          value = pair[1] || true;
          fn = pageOptions[key];

          if (typeof fn === 'function')
            fn(param);
        });

      },

      // helper functions to add and remove a class
      addClass: function (el, className) {
        var elClasses = el.className.split(' ');
        // if className is not there, add it
        if (elClasses.indexOf(className) === -1) {
          elClasses.push(className);
          el.className = elClasses.join(' ');
        }
      },
      removeClass: function (el, className) {
        var elClasses = el.className.split(' ');
        var len = elClasses.length;
        // loop thru to remove className
        while (len--) {
          if (elClasses[len] === className)
            elClasses.splice(len, 1);
        }
        el.className = elClasses.join(' ');
      }
    };

    // execute javascript (rc.onload) onload
    var existingOnload = window.onload;

    window.onload = function() {
      if (existingOnload) existingOnload();
      // loop thru all the functions in the queue
      var queue = rc.q || [];
      queue.forEach(function (fn) {
        fn.call();
      })
      // reset push to fire fn immediately
      rc.q = {
        push: function (fn) { fn.call(); }
      };
    };
  })();
</script>
